(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"2e04":function(t,e,a){"use strict";var i=a("cb54"),n=a.n(i);n.a},"392b":function(t,e,a){"use strict";a("4d90"),a("5319");var i,n,o={data(){return{prevRoute:null}},beforeRouteEnter(t,e,a){a((t=>{t.prevRoute=e}))},computed:{today(){const t=new Date,e={month:t.toLocaleDateString("en-US",{month:"long"}),year:t.getFullYear(),dayOfMonth:t.getDate(),dayOfWeek:t.getDay(),human:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),iso:t.toISOString(),yyyymmdd:t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,"0")};return e},startDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},lastDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth()+1,0)}},methods:{replaceAll:function(t,e,a){return t.replace(new RegExp(e,"g"),a)},resolveAssetsUrl:function(t){return"https://localhost:3000/"+t},showNotif:function(t,e){this.$q.notify({color:t?"green-4":"negative",textColor:"white",icon:t?"check_circle_outline":"error_outline",timeout:"2500",position:"top",message:e})},returnToPageIndex:function(t){this.prevRoute&&"/"!==this.prevRoute.path?this.$router.go(-1):this.$router.push(t).catch((t=>{}))},findMaxDt:function(t,e){return new Date(Math.max(new Date(t),new Date(e)))},findMinDt:function(t,e){return new Date(Math.min(new Date(t),new Date(e)))},toQDateFormat:function(t){return t?t.getFullYear()+"/"+(t.getMonth()+1).toString().padStart(2,0)+"/"+t.getDate().toString().padStart(2,0):t},toHumanReadableDt:function(t){const e=new Date(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})+" "+e.getHours().toString().padStart(2,0)+":"+e.getMinutes().toString().padStart(2,0):t}}},l=o,s=a("2877"),r=Object(s["a"])(l,i,n,!1,null,null,null);e["a"]=r.exports},"54b1":function(t,e,a){},"5b3a":function(t,e,a){"use strict";var i=a("54b1"),n=a.n(i);n.a},"7d22":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-px-md q-pt-lg"},[a("div",{staticClass:"page-heading text-white q-pa-md"},[a("div",{staticClass:"heading-caption"},[a("h6",[t._v("Review Account")]),a("br"),a("p",[t._v("\n                You may check and configure the customer's account details.\n            ")])])]),a("div",{staticClass:"page-contents text-white q-pa-md"},[a("div",{staticClass:"content-1"},[a("div",{staticClass:"text-subtitle2 flex flex-center"},[a("q-icon",{staticClass:"caption-icon q-mx-md",attrs:{name:"account_circle"}}),t._v("Profile Info\n            ")],1),a("div",[a("q-form",{attrs:{disabled:t.profile.hasError||t.profile.loading},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.onSubmit(e)}}},[t.profile.loading?a("q-item",{staticClass:"q-mt-sm"},[a("q-spinner",{attrs:{color:"white",size:"2em"}})],1):a("q-list",{staticClass:"detail-list",attrs:{separator:""}},[a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("First Name")]),a("q-input",{staticClass:"field-value",attrs:{type:"text",dense:"",outlined:"",dark:"","hide-bottom-space":"",placeholder:"Field required","lazy-rules":"",rules:[function(t){return null!==t&&""!==t.trim()},function(t){return null!==t&&t.length<=256}]},model:{value:t.profile.data.fname,callback:function(e){t.$set(t.profile.data,"fname",e)},expression:"profile.data.fname"}})],1),a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Last Name")]),a("q-input",{staticClass:"field-value",attrs:{type:"text",dense:"",outlined:"",dark:"","hide-bottom-space":"",placeholder:"Field required","lazy-rules":"",rules:[function(t){return null!==t&&""!==t.trim()},function(t){return null!==t&&t.length<=256}]},model:{value:t.profile.data.lname,callback:function(e){t.$set(t.profile.data,"lname",e)},expression:"profile.data.lname"}})],1),a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Status")]),a("q-toggle",{attrs:{"checked-icon":"check",color:"green-4","unchecked-icon":"clear",label:t.profile.data.active?"Active":"Inactive"},model:{value:t.profile.data.active,callback:function(e){t.$set(t.profile.data,"active",e)},expression:"profile.data.active"}})],1),a("q-item",{staticClass:"detail-field capitalize"},[a("span",{staticClass:"field-label"},[t._v("Account Type")]),t._v("\n                            "+t._s(t.profile.data.type)+"\n                        ")]),a("q-item",{directives:[{name:"show",rawName:"v-show",value:"reseller"===t.profile.data.type,expression:"profile.data.type === 'reseller'"}],staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Approval Status")]),a("q-toggle",{attrs:{"checked-icon":"check",color:"green-4","unchecked-icon":"clear",label:t.profile.data.approved?"Approved":"For Approval"},model:{value:t.profile.data.approved,callback:function(e){t.$set(t.profile.data,"approved",e)},expression:"profile.data.approved"}})],1)],1),a("q-separator"),a("div",{staticClass:"q-pa-md"},[a("q-btn",{attrs:{label:"Save",type:"submit",color:"primary",loading:t.loading_p,disable:t.loading_p},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner-gears")]},proxy:!0}])})],1)],1)],1)]),a("div",{staticClass:"content-2"},[a("div",{staticClass:"text-subtitle2 flex flex-center"},[a("q-icon",{staticClass:"caption-icon q-mx-md",attrs:{name:"local_shipping"}}),t._v("Contact Info and Delivery Address\n            ")],1),a("div",[a("q-form",{attrs:{disabled:t.profile.hasError||t.profile.loading},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.onSubmitContact(e)}}},[t.profile.loading?a("q-item",{staticClass:"q-mt-sm"},[a("q-spinner",{attrs:{color:"white",size:"2em"}})],1):a("q-list",{staticClass:"detail-list",attrs:{separator:""}},[a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Email")]),a("q-input",{staticClass:"field-value",attrs:{type:"email",dense:"",outlined:"",dark:"",readonly:"","hide-bottom-space":""},model:{value:t.profile.data.email,callback:function(e){t.$set(t.profile.data,"email",e)},expression:"profile.data.email"}})],1),a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Address")]),a("q-input",{staticClass:"field-value",attrs:{type:"text",dense:"",outlined:"",dark:"","hide-bottom-space":"","lazy-rules":"",rules:[function(t){return!t||(null!==t&&t.length)<=512}]},model:{value:t.profile.data.address,callback:function(e){t.$set(t.profile.data,"address",e)},expression:"profile.data.address"}})],1),a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Phone")]),a("q-input",{staticClass:"field-value",attrs:{type:"tel",dense:"",outlined:"",dark:"","hide-bottom-space":"",placeholder:"Ex. (+63) 000-000-0000",mask:"(+##) ###-###-####","lazy-rules":"",rules:[t._isValidPhoneNum]},on:{input:t.syncVerifiedStatus},model:{value:t.profile.data.phone,callback:function(e){t.$set(t.profile.data,"phone",e)},expression:"profile.data.phone"}})],1),a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Phone Verified")]),a("q-toggle",{attrs:{"checked-icon":"check",color:"green-4","unchecked-icon":"clear",label:t.profile.data.smsVerified?"Confirmed":"Unconfirmed"},model:{value:t.profile.data.smsVerified,callback:function(e){t.$set(t.profile.data,"smsVerified",e)},expression:"profile.data.smsVerified"}})],1)],1),a("q-separator"),a("div",{staticClass:"q-pa-md"},[a("q-btn",{attrs:{label:"Save",type:"submit",color:"primary",loading:t.loading_c,disable:t.loading_c},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner-gears")]},proxy:!0}])})],1)],1)],1)])])])},n=[],o=(a("5319"),a("c973")),l=a.n(o),s=a("392b");let r=null;var c={name:"AccountsEdit",mixins:[s["a"]],watch:{$route(t,e){t.path!==e.path&&this.getAccount()}},meta(){return{title:"Review Account",meta:{robots:{name:"robots",content:"noindex"}}}},beforeCreate(){r=this.$RepositoryFactory.get("accounts")},created(){this.getAccount()},computed:{resolvedPhone(){const t=this.profile.data.phone;return t&&""!==t?t.replace(new RegExp(/[-()]/g),""):t}},data(){return{loading_p:!1,loading_c:!1,profile:{loading:!0,hasError:!1,data:{active:!1,fname:"",lname:"",type:"",approved:!1,address:"",email:"",phone:"",smsVerified:!1}}}},methods:{_isValidEmail(t){const e=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return e.test(t)||"Invalid email format"},_isValidPhoneNum(t){if(!t)return!0;const e=/^\+\d{1,3}\s\d{1,14}(\s\d{1,13})?/;return e.test(this.resolvedPhone)||"Invalid mobile phone format"},syncVerifiedStatus(t){t||(this.profile.data.smsVerified=!1)},getAccount(){var t=this;return l()((function*(){try{const e=yield r.getAccount(t.$route.params.id);t.profile.data=e}catch(e){t.showNotif(!1,"Could not retrieve profile details. "),t.profile.hasError=!0}finally{t.profile.loading=!1}}))()},onSubmit:function(){var t=l()((function*(t){this.loading_p=!0;try{yield r.editAccount(this.$route.params.id,this.profile.data),this.showNotif(!0,"Successfully updated account info."),this.loading_p=!1,this.returnToPageIndex("/accounts")}catch(e){this.showNotif(!1,"Could not update the account info. "),this.loading_p=!1}}));return function(e){return t.apply(this,arguments)}}(),onSubmitContact:function(){var t=l()((function*(t){this.loading_c=!0;try{yield r.editAccountContact(this.$route.params.id,this.profile.data),this.showNotif(!0,"Successfully updated contact info."),this.loading_c=!1,this.returnToPageIndex("/accounts")}catch(e){this.showNotif(!1,"Could not update the contact info. "),this.loading_c=!1}}));return function(e){return t.apply(this,arguments)}}()}},d=c,u=(a("2e04"),a("5b3a"),a("2877")),p=a("9989"),f=a("0016"),m=a("0378"),h=a("66e5"),g=a("0d59"),v=a("1c1c"),b=a("27f9"),y=a("9564"),C=a("eb85"),q=a("9c40"),_=a("cf57"),w=a("8572"),x=a("eebe"),S=a.n(x),k=Object(u["a"])(d,i,n,!1,null,"f0fc66be",null);e["default"]=k.exports;S()(k,"components",{QPage:p["a"],QIcon:f["a"],QForm:m["a"],QItem:h["a"],QSpinner:g["a"],QList:v["a"],QInput:b["a"],QToggle:y["a"],QSeparator:C["a"],QBtn:q["a"],QSpinnerGears:_["a"],QField:w["a"]})},cb54:function(t,e,a){}}]);