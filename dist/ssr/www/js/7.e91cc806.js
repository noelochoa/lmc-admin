(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"097c":function(t,e,n){"use strict";var a=n("e50e"),o=n.n(a);o.a},"392b":function(t,e,n){"use strict";n("4d90"),n("5319");var a,o,r={data(){return{prevRoute:null}},beforeRouteEnter(t,e,n){n((t=>{t.prevRoute=e}))},computed:{today(){const t=new Date,e={month:t.toLocaleDateString("en-US",{month:"long"}),year:t.getFullYear(),dayOfMonth:t.getDate(),dayOfWeek:t.getDay(),human:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),iso:t.toISOString(),yyyymmdd:t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,"0")};return e},startDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},lastDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth()+1,0)}},methods:{replaceAll:function(t,e,n){return t.replace(new RegExp(e,"g"),n)},resolveAssetsUrl:function(t){return"https://api.bake-free.co/"+t},showNotif:function(t,e){this.$q.notify({color:t?"green-4":"negative",textColor:"white",icon:t?"check_circle_outline":"error_outline",timeout:"2500",position:"top",message:e})},returnToPageIndex:function(t){this.prevRoute&&"/"!==this.prevRoute.path?this.$router.go(-1):this.$router.push(t).catch((t=>{}))},findMaxDt:function(t,e){return new Date(Math.max(new Date(t),new Date(e)))},findMinDt:function(t,e){return new Date(Math.min(new Date(t),new Date(e)))},toQDateFormat:function(t){return t?t.getFullYear()+"/"+(t.getMonth()+1).toString().padStart(2,0)+"/"+t.getDate().toString().padStart(2,0):t},toHumanReadableDt:function(t){const e=new Date(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})+" "+e.getHours().toString().padStart(2,0)+":"+e.getMinutes().toString().padStart(2,0):t}}},s=r,i=n("2877"),l=Object(i["a"])(s,a,o,!1,null,null,null);e["a"]=l.exports},"48f0":function(t,e,n){},8705:function(t,e,n){"use strict";var a=n("48f0"),o=n.n(a);o.a},"96ec":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-dialog",{attrs:{value:t.showDlg,square:""},on:{hide:t.emitClose}},[n("q-card",{attrs:{dark:""}},[n("q-card-section",{staticClass:"row items-center"},[t._t("avatar"),n("span",{staticClass:"q-ml-sm"},[t._t("message")],2)],2),n("q-card-actions",{attrs:{align:"right"}},[t._t("actions")],2)],1)],1)},o=[],r={name:"ConfirmDialog",props:{showDlg:{type:Boolean,required:!0,default:!1}},methods:{emitClose(){this.$emit("update:showDlg",!1)}}},s=r,i=n("2877"),l=n("24e8"),c=n("f09f"),u=n("a370"),d=n("4b7e"),p=n("eebe"),h=n.n(p),m=Object(i["a"])(s,a,o,!1,null,null,null);e["a"]=m.exports;h()(m,"components",{QDialog:l["a"],QCard:c["a"],QCardSection:u["a"],QCardActions:d["a"]})},b4d9:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"q-px-md q-pt-lg"},[n("div",{staticClass:"page-heading text-white q-pa-md"},[n("div",{staticClass:"heading-caption"},[n("h6",[t._v("Store Announcements")]),n("br"),n("p",[t._v("\n                The following is a list web store announcements. "),n("br"),t._v("\n                Note: Only the latest entry will be visible on the Store if\n                there are overlapping dates.\n            ")])]),n("div",{staticClass:"heading-stat-1 text-caption"},[t._v("\n            Today\n            "),n("br"),n("p",{staticClass:"text-subtitle2"},[t._v("\n                "+t._s(t.today.human)+"\n            ")])])]),n("div",{staticClass:"page-contents text-white q-pa-md"},[n("div",{staticClass:"content-1"},[n("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"post_add",to:"/announcements/add"}},[n("q-tooltip",{attrs:{anchor:"bottom right",self:"top middle",offset:[10,10]}},[t._v("Add Announcement")])],1),n("q-input",{staticClass:"filter-search-box",attrs:{type:"search",placeholder:"Search text",debounce:"500",dark:"",dense:"",outlined:""},on:{input:t.searchInput},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0},{key:"append",fn:function(){return[n("transition",{attrs:{name:"fade"}},[n("q-icon",{directives:[{name:"show",rawName:"v-show",value:""!=t.search,expression:"search != ''"}],staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:t.searchClear}})],1)]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n("div",{staticClass:"content-2"},[n("q-table",{staticClass:"announcement-table",attrs:{grid:"","row-key":"id",data:t.data,columns:t.columns,"rows-per-page-options":[0],pagination:t.pagination,filter:t.search,loading:t.loading},on:{"update:pagination":[function(e){t.pagination=e},t.onChgPage],request:t.onRequest},scopedSlots:t._u([{key:"item",fn:function(e){return[n("div",{staticClass:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-4"},[n("q-card",{staticClass:"bg-gray-alpha-2"},[n("q-card-section",[t._v("\n                                "+t._s(e.row.message)+"\n                            ")]),n("q-separator"),n("q-list",{attrs:{dense:""}},t._l(e.cols.filter((function(t){return"message"!==t.name})),(function(e){return n("q-item",{key:e.name},[n("q-item-section",[n("q-item-label",[t._v("\n                                            "+t._s(e.label)+"\n                                        ")])],1),n("q-item-section",{attrs:{side:""}},[n("q-item-label",{staticClass:"text-primary"},[t._v("\n                                            "+t._s(e.value)+"\n                                        ")])],1)],1)})),1),n("q-separator"),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"build",to:"/announcements/edit/"+e.row.id}},[n("q-tooltip",{attrs:{anchor:"bottom right",self:"top middle",offset:[10,10]}},[t._v("Edit Announcement\n                                    ")])],1),n("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"delete"},on:{click:function(n){return t.confirmDel(e.row.id)}}},[n("q-tooltip",{attrs:{anchor:"bottom right",self:"top middle",offset:[10,10]}},[t._v("Delete Announcement\n                                    ")])],1)],1)],1)],1)]}}])}),n("ConfirmDialog",{attrs:{showDlg:t.showDlg},on:{"update:showDlg":function(e){t.showDlg=e},"update:show-dlg":function(e){t.showDlg=e}},scopedSlots:t._u([{key:"avatar",fn:function(){return[n("q-avatar",{attrs:{icon:"delete_forever",color:"red-5","text-color":"white"}})]},proxy:!0},{key:"message",fn:function(){return[t._v("\n                    Continue on removing this announcement?"),n("br"),t._v("\n                    Warning: This action is permanent.\n                ")]},proxy:!0},{key:"actions",fn:function(){return[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Remove",color:"red-5"},on:{click:t.onRemove}})]},proxy:!0}])})],1)])])},o=[],r=(n("fb6a"),n("5319"),n("c973")),s=n.n(r),i=n("96ec"),l=n("392b");let c=null;var u={name:"AnnoucementIndex",components:{ConfirmDialog:i["a"]},mixins:[l["a"]],meta(){return{title:"Store Announcements"}},beforeCreate(){c=this.$RepositoryFactory.get("announcements")},created(){this.$route.query.s&&(this.search=this.$route.query.s),this.$route.query.p&&!isNaN(this.$route.query.p)&&(this.pagination.page=Number.parseInt(this.$route.query.p))},mounted(){this.onRequest({pagination:this.pagination,filter:void 0})},data(){return{announcementList:[],search:"",searchReq:null,loading:!1,showDlg:!1,toDelID:-1,pagination:{sortBy:"start",descending:!0,page:1,rowsPerPage:9},columns:[{name:"message",field:"message",label:"Message",sortable:!0,required:!0},{name:"start",field:"start",label:"Start",sortable:!0},{name:"end",field:"end",label:"End",sortable:!0}],data:[],original:[]}},methods:{searchClear(t){let e=Object.assign({},this.$route.query);delete e.s,this.$router.replace({query:e}).catch((t=>{})),this.search=""},searchInput(t){let e=Object.assign({},this.$route.query,{s:t});t||delete e.s,this.$router.replace({query:e}).catch((t=>{}))},onChgPage(t){let e=Object.assign({},this.$route.query,{p:t.page});t||delete e.p,this.$router.replace({query:e}).catch((t=>{}))},onRequest(t){var e=this;return s()((function*(){e.loading=!0;try{const t=yield c.getAllAnnouncements();e.original=t,e.data=e.original.slice()}catch(t){e.showNotif(!1,"Could not retrieve announcement details. ")}finally{e.loading=!1}}))()},onRemove(){var t=this;return s()((function*(){if(-1!==t.toDelID)try{yield c.deleteAnnouncement(t.toDelID);t.showNotif(!0,"Successfully removed announcement."),t.$delete(t.data,t.data.findIndex((e=>e.id==t.toDelID))),t.toDelID=-1}catch(e){t.showNotif(!1,"Could not delete item. ")}}))()},confirmDel(t){this.showDlg=!0,this.toDelID=t}}},d=u,p=(n("097c"),n("8705"),n("2877")),h=n("9989"),m=n("9c40"),g=n("05c0"),f=n("27f9"),v=n("0016"),b=n("eaac"),y=n("f09f"),q=n("a370"),w=n("eb85"),D=n("1c1c"),C=n("66e5"),S=n("4074"),_=n("0170"),x=n("4b7e"),k=n("cb32"),Q=n("7f67"),$=n("eebe"),I=n.n($),A=Object(p["a"])(d,a,o,!1,null,"104fe983",null);e["default"]=A.exports;I()(A,"components",{QPage:h["a"],QBtn:m["a"],QTooltip:g["a"],QInput:f["a"],QIcon:v["a"],QTable:b["a"],QCard:y["a"],QCardSection:q["a"],QSeparator:w["a"],QList:D["a"],QItem:C["a"],QItemSection:S["a"],QItemLabel:_["a"],QCardActions:x["a"],QAvatar:k["a"]}),I()(A,"directives",{ClosePopup:Q["a"]})},e50e:function(t,e,n){}}]);