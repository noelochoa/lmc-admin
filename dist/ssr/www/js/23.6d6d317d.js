(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"04f7":function(t,a,e){"use strict";var n=e("e26a"),i=e.n(n);i.a},"1d1b":function(t,a,e){"use strict";var n=e("ac9e"),i=e.n(n);i.a},"392b":function(t,a,e){"use strict";e("4d90"),e("5319");var n,i,o={data(){return{prevRoute:null}},beforeRouteEnter(t,a,e){e((t=>{t.prevRoute=a}))},computed:{today(){const t=new Date,a={month:t.toLocaleDateString("en-US",{month:"long"}),year:t.getFullYear(),dayOfMonth:t.getDate(),dayOfWeek:t.getDay(),human:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),iso:t.toISOString(),yyyymmdd:t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,"0")};return a},startDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},lastDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth()+1,0)}},methods:{replaceAll:function(t,a,e){return t.replace(new RegExp(a,"g"),e)},resolveAssetsUrl:function(t){return"https://localhost:3000/"+t},showNotif:function(t,a){this.$q.notify({color:t?"green-4":"negative",textColor:"white",icon:t?"check_circle_outline":"error_outline",timeout:"2500",position:"top",message:a})},returnToPageIndex:function(t){this.prevRoute&&"/"!==this.prevRoute.path?this.$router.go(-1):this.$router.push(t).catch((t=>{}))},findMaxDt:function(t,a){return new Date(Math.max(new Date(t),new Date(a)))},findMinDt:function(t,a){return new Date(Math.min(new Date(t),new Date(a)))},toQDateFormat:function(t){return t?t.getFullYear()+"/"+(t.getMonth()+1).toString().padStart(2,0)+"/"+t.getDate().toString().padStart(2,0):t},toHumanReadableDt:function(t){const a=new Date(t);return a?a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})+" "+a.getHours().toString().padStart(2,0)+":"+a.getMinutes().toString().padStart(2,0):t}}},s=o,r=e("2877"),l=Object(r["a"])(s,n,i,!1,null,null,null);a["a"]=l.exports},"94d0":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"q-px-md q-pt-lg"},[e("div",{staticClass:"page-heading text-white q-pa-md"},[e("div",{staticClass:"heading-caption"},[e("h6",[t._v("Edit Business Holiday Details")]),e("br"),e("p",[t._v("You may edit the details of this business holiday.")])])]),e("div",{staticClass:"page-contents text-white q-pa-md"},[e("div",{staticClass:"content-1"},[e("div",{staticClass:"text-subtitle2 flex flex-center"},[e("q-icon",{staticClass:"caption-icon q-mx-md",attrs:{name:"account_circle"}}),t._v("Business Holiday Info\n            ")],1),e("div",[e("q-form",{attrs:{disabled:t.holiday.hasError||t.holiday.loading},on:{submit:function(a){return a.preventDefault(),a.stopPropagation(),t.onSubmit(a)}}},[t.holiday.loading?e("q-item",{staticClass:"q-mt-sm"},[e("q-spinner",{attrs:{color:"white",size:"2em"}})],1):e("q-list",{staticClass:"detail-list",attrs:{separator:""}},[e("q-item",{staticClass:"detail-field"},[e("span",{staticClass:"field-label"},[t._v("Starts from")]),e("q-input",{staticClass:"field-value",attrs:{dense:"",outlined:"","hide-bottom-space":"",dark:"",rules:[function(t){return null!==t&&""!==t.trim()},t._isValidDatetime]},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxyS",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{dark:"","no-unset":"",mask:"YYYY-MM-DD HH:mm"},on:{input:function(){return t.$refs.qDateProxyS.hide()}},model:{value:t.holiday.data.start,callback:function(a){t.$set(t.holiday.data,"start",a)},expression:"holiday.data.start"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{ref:"qTimeProxyS",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{dark:"",mask:"YYYY-MM-DD HH:mm",format24h:""},on:{input:function(){return t.$refs.qTimeProxyS.hide()}},model:{value:t.holiday.data.start,callback:function(a){t.$set(t.holiday.data,"start",a)},expression:"holiday.data.start"}})],1)],1)]},proxy:!0}]),model:{value:t.holiday.data.start,callback:function(a){t.$set(t.holiday.data,"start",a)},expression:"holiday.data.start"}})],1),e("q-item",{staticClass:"detail-field"},[e("span",{staticClass:"field-label"},[t._v("Ends at")]),e("q-input",{staticClass:"field-value",attrs:{dense:"",outlined:"","hide-bottom-space":"",dark:"","lazy-rules":"",rules:[function(t){return null!==t&&""!==t.trim()},t._isValidDatetime,t._isValidEndDt]},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[e("q-popup-proxy",{ref:"qDateProxyE",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-date",{attrs:{dark:"","no-unset":"",mask:"YYYY-MM-DD HH:mm"},on:{input:function(){return t.$refs.qDateProxyE.hide()}},model:{value:t.holiday.data.end,callback:function(a){t.$set(t.holiday.data,"end",a)},expression:"holiday.data.end"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[e("q-popup-proxy",{ref:"qTimeProxyE",attrs:{"transition-show":"scale","transition-hide":"scale"}},[e("q-time",{attrs:{dark:"",mask:"YYYY-MM-DD HH:mm",format24h:""},on:{input:function(){return t.$refs.qTimeProxyE.hide()}},model:{value:t.holiday.data.end,callback:function(a){t.$set(t.holiday.data,"end",a)},expression:"holiday.data.end"}})],1)],1)]},proxy:!0}]),model:{value:t.holiday.data.end,callback:function(a){t.$set(t.holiday.data,"end",a)},expression:"holiday.data.end"}})],1),e("q-item",{staticClass:"detail-field"},[e("span",{staticClass:"field-label"},[t._v("Reason")]),e("q-input",{staticClass:"field-value",attrs:{dense:"",outlined:"",dark:"","hide-bottom-space":"",placeholder:"Business Holiday, Emergency, etc.","lazy-rules":"",rules:[function(t){return null!==t&&""!==t.trim()}]},model:{value:t.holiday.data.reason,callback:function(a){t.$set(t.holiday.data,"reason",a)},expression:"holiday.data.reason"}})],1)],1),e("q-separator"),e("div",{staticClass:"q-pa-md"},[e("q-btn",{attrs:{label:"Save",type:"submit",color:"primary",loading:t.loading,disable:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-spinner-gears")]},proxy:!0}])})],1)],1)],1)]),e("div",{staticClass:"content-2"})])])},i=[],o=e("c973"),s=e.n(o),r=e("392b");let l=null;var d={name:"BusinessHolidayEdit",mixins:[r["a"]],meta(){return{title:"Edit Business Holiday"}},beforeCreate(){l=this.$RepositoryFactory.get("holidays")},created(){this.getHolidayInfo()},data(){return{loading:!1,hasTyped:!1,holiday:{loading:!0,hasError:!1,data:{reason:"",start:"",end:""}}}},methods:{_isValidDatetime(t){const a=/^\d{4}-(0?[1-9]|1[0-2])-(0?[1-9]|[12][0-9]|3[01]) (0?[0-9]|1[0-9]|2[0-3]):([0-9]|[0-5][0-9])$/g;return a.test(t)||"Invalid date & time format"},_isValidEndDt(t){const a=new Date(t),e=new Date(this.holiday.data.start);return a.getTime()>e.getTime()||"End date needs to be greater"},getHolidayInfo(){var t=this;return s()((function*(){try{const a=yield l.getBusinessHoliday(t.$route.params.id);t.holiday.data=a}catch(a){t.showNotif(!1,"Could not retrieve holiday details. "),t.holiday.hasError=!0}finally{t.holiday.loading=!1}}))()},onSubmit:function(){var t=s()((function*(t){this.loading=!0;try{yield l.editHoliday(this.$route.params.id,this.holiday.data),this.showNotif(!0,"Successfully updated holiday info."),this.returnToPageIndex("/holidays")}catch(a){this.showNotif(!1,"Could not edit holiday info. ")}finally{this.loading=!1}}));return function(a){return t.apply(this,arguments)}}()}},c=d,u=(e("1d1b"),e("04f7"),e("2877")),p=e("9989"),h=e("0016"),y=e("0378"),m=e("66e5"),f=e("0d59"),g=e("1c1c"),D=e("27f9"),v=e("7cbe"),q=e("52ee"),x=e("ca78"),b=e("eb85"),S=e("9c40"),w=e("cf57"),k=e("8572"),C=e("eebe"),Y=e.n(C),_=Object(u["a"])(c,n,i,!1,null,"01005a3c",null);a["default"]=_.exports;Y()(_,"components",{QPage:p["a"],QIcon:h["a"],QForm:y["a"],QItem:m["a"],QSpinner:f["a"],QList:g["a"],QInput:D["a"],QPopupProxy:v["a"],QDate:q["a"],QTime:x["a"],QSeparator:b["a"],QBtn:S["a"],QSpinnerGears:w["a"],QField:k["a"]})},ac9e:function(t,a,e){},e26a:function(t,a,e){}}]);