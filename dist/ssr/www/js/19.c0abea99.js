(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"053a":function(t,e,a){},2089:function(t,e,a){"use strict";var n=a("053a"),o=a.n(n);o.a},"255f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-px-md q-pt-lg"},[a("div",{staticClass:"page-heading text-white q-pa-md"},[a("div",{staticClass:"heading-caption"},[a("h6",[t._v("Reply to Comment")]),a("br"),a("p",[t._v("Fill out the form to reply to this comment.")])])]),a("div",{staticClass:"page-contents text-white q-pa-md"},[a("div",{staticClass:"content-1"},[a("div",{staticClass:"text-subtitle2 flex flex-center"},[a("q-icon",{staticClass:"caption-icon q-mx-md",attrs:{name:"account_circle"}}),t._v("Comment Details\n            ")],1),t.comment.loading?a("q-item",{staticClass:"q-mt-sm"},[a("q-spinner",{attrs:{color:"white",size:"2em"}})],1):a("div",[a("q-list",{staticClass:"detail-list",attrs:{separator:""}},[a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Content")]),a("span",{staticClass:"field-value"},[t._v("\n                            "+t._s(t.comment.data.text)+"\n                        ")])]),a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Posted")]),a("span",{staticClass:"field-value"},[t._v("\n                            "+t._s(t.comment.data.posted)+"\n                        ")])]),a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Author")]),a("span",{staticClass:"field-value"},[t._v("\n                            "+t._s(t.comment.data.author)+"\n                        ")])]),a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Product")]),a("span",{staticClass:"field-value"},[t._v("\n                            "+t._s(t.comment.data.product)+"\n                        ")])])],1)],1)],1),a("div",{staticClass:"content-2"},[a("div",{staticClass:"text-subtitle2 flex flex-center"},[a("q-icon",{staticClass:"caption-icon q-mx-md",attrs:{name:"account_circle"}}),t._v("Reply\n            ")],1),a("div",[a("q-form",{attrs:{disabled:t.comment.hasError||t.comment.loading},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.onSubmit(e)}}},[t.comment.loading?a("q-item",{staticClass:"q-mt-sm"},[a("q-spinner",{attrs:{color:"white",size:"2em"}})],1):a("q-list",{staticClass:"detail-list",attrs:{separator:""}},[a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Reply as")]),a("q-input",{staticClass:"field-value",attrs:{type:"text",dense:"",outlined:"",dark:"","hide-bottom-space":"",placeholder:"Field required. ","lazy-rules":"",rules:[function(t){return null!==t&&""!==t.trim()}]},on:{input:function(e){t.hasTyped=!0}},model:{value:t.comment.data.replyAuthor,callback:function(e){t.$set(t.comment.data,"replyAuthor",e)},expression:"comment.data.replyAuthor"}})],1),a("q-item",{staticClass:"detail-field"},[a("span",{staticClass:"field-label"},[t._v("Content")]),a("q-editor",{ref:"qTxtEditor",staticClass:"field-value qtext-editor",class:{"has-error":t.contentEmpty},attrs:{flat:"","content-class":"text-black bg-grey-3","toolbar-text-color":"black","toolbar-toggle-color":"yellow-8",toolbar:[["bold","italic"],["undo","redo"]]},on:{input:function(e){t.hasTyped=!0}},model:{value:t.comment.data.reply,callback:function(e){t.$set(t.comment.data,"reply",e)},expression:"comment.data.reply"}})],1)],1),a("q-separator"),a("div",{staticClass:"q-pa-md"},[a("q-btn",{attrs:{label:"Reply",type:"submit",color:"primary",loading:t.loading,disable:t.loading||!t.hasTyped},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner-gears")]},proxy:!0}])})],1)],1)],1)])])])},o=[],s=(a("5319"),a("498a"),a("c973")),i=a.n(s),l=a("392b");let r=null;var c={name:"ReplyComment",mixins:[l["a"]],meta(){return{title:"Reply"}},beforeCreate(){r=this.$RepositoryFactory.get("comments")},created(){this.getComment()},mounted(){},computed:{contentEmpty(){return this.hasTyped&&this._isContentEmpty(this.comment.data.reply)}},data(){return{loading:!1,hasTyped:!1,comment:{loading:!0,hasError:!1,data:{text:"",author:"",product:"",posted:"",replyAuthor:"",reply:""}}}},methods:{_isContentEmpty(t){return t=this.replaceAll(t,"&nbsp;",""),t=this.replaceAll(t," ",""),t=t.replace(/(<([^>]+)>)/gi,"").trim(),0==t.length},getComment(){var t=this;return i()((function*(){try{const e=yield r.getComment(t.$route.params.id);e.replyAuthor=e.replyAuthor?e.replyAuthor:t.$store.state.auth.name,t.comment.data=e}catch(e){t.showNotif(!1,"Could not retrieve comment details. "),t.comment.hasError=!0}finally{t.comment.loading=!1}}))()},onSubmit:function(){var t=i()((function*(t){if(this.loading=!0,this._isContentEmpty(this.comment.data.reply))this.$refs.qTxtEditor.focus(),this.loading=!1;else try{yield r.replyToComment(this.$route.params.id,this.comment.data),this.showNotif(!0,"Successfully posted reply to comment."),this.returnToPageIndex("/comments")}catch(e){this.showNotif(!1,"Could not post reply. ")}finally{this.loading=!1}}));return function(e){return t.apply(this,arguments)}}()}},d=c,m=(a("2089"),a("5674"),a("2877")),u=a("9989"),p=a("0016"),h=a("66e5"),f=a("0d59"),g=a("1c1c"),y=a("0378"),C=a("27f9"),v=a("d66b"),b=a("eb85"),q=a("9c40"),x=a("cf57"),w=a("8572"),_=a("eebe"),D=a.n(_),S=Object(m["a"])(d,n,o,!1,null,"6db0a4f2",null);e["default"]=S.exports;D()(S,"components",{QPage:u["a"],QIcon:p["a"],QItem:h["a"],QSpinner:f["a"],QList:g["a"],QForm:y["a"],QInput:C["a"],QEditor:v["a"],QSeparator:b["a"],QBtn:q["a"],QSpinnerGears:x["a"],QField:w["a"]})},"392b":function(t,e,a){"use strict";a("4d90"),a("5319");var n,o,s={data(){return{prevRoute:null}},beforeRouteEnter(t,e,a){a((t=>{t.prevRoute=e}))},computed:{today(){const t=new Date,e={month:t.toLocaleDateString("en-US",{month:"long"}),year:t.getFullYear(),dayOfMonth:t.getDate(),dayOfWeek:t.getDay(),human:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),iso:t.toISOString(),yyyymmdd:t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,"0")};return e},startDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},lastDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth()+1,0)}},methods:{replaceAll:function(t,e,a){return t.replace(new RegExp(e,"g"),a)},resolveAssetsUrl:function(t){return"https://api.bake-free.co/"+t},showNotif:function(t,e){this.$q.notify({color:t?"green-4":"negative",textColor:"white",icon:t?"check_circle_outline":"error_outline",timeout:"2500",position:"top",message:e})},returnToPageIndex:function(t){this.prevRoute&&"/"!==this.prevRoute.path?this.$router.go(-1):this.$router.push(t).catch((t=>{}))},findMaxDt:function(t,e){return new Date(Math.max(new Date(t),new Date(e)))},findMinDt:function(t,e){return new Date(Math.min(new Date(t),new Date(e)))},toQDateFormat:function(t){return t?t.getFullYear()+"/"+(t.getMonth()+1).toString().padStart(2,0)+"/"+t.getDate().toString().padStart(2,0):t},toHumanReadableDt:function(t){const e=new Date(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})+" "+e.getHours().toString().padStart(2,0)+":"+e.getMinutes().toString().padStart(2,0):t}}},i=s,l=a("2877"),r=Object(l["a"])(i,n,o,!1,null,null,null);e["a"]=r.exports},5674:function(t,e,a){"use strict";var n=a("9988"),o=a.n(n);o.a},9988:function(t,e,a){}}]);