(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"118a":function(t,e,a){},"1a91":function(t,e,a){},"1ff9":function(t,e,a){"use strict";var n=a("1a91"),r=a.n(n);r.a},"2a40":function(t,e,a){"use strict";var n=a("a812"),r=a.n(n);r.a},"392b":function(t,e,a){"use strict";a("4d90"),a("5319");var n,r,s={data(){return{prevRoute:null}},beforeRouteEnter(t,e,a){a((t=>{t.prevRoute=e}))},computed:{today(){const t=new Date,e={month:t.toLocaleDateString("en-US",{month:"long"}),year:t.getFullYear(),dayOfMonth:t.getDate(),dayOfWeek:t.getDay(),human:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),iso:t.toISOString(),yyyymmdd:t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,"0")};return e},startDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},lastDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth()+1,0)}},methods:{replaceAll:function(t,e,a){return t.replace(new RegExp(e,"g"),a)},resolveAssetsUrl:function(t){return"https://api.bake-free.co/"+t},showNotif:function(t,e){this.$q.notify({color:t?"green-4":"negative",textColor:"white",icon:t?"check_circle_outline":"error_outline",timeout:"2500",position:"top",message:e})},returnToPageIndex:function(t){this.prevRoute&&"/"!==this.prevRoute.path?this.$router.go(-1):this.$router.push(t).catch((t=>{}))},findMaxDt:function(t,e){return new Date(Math.max(new Date(t),new Date(e)))},findMinDt:function(t,e){return new Date(Math.min(new Date(t),new Date(e)))},toQDateFormat:function(t){return t?t.getFullYear()+"/"+(t.getMonth()+1).toString().padStart(2,0)+"/"+t.getDate().toString().padStart(2,0):t},toHumanReadableDt:function(t){const e=new Date(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})+" "+e.getHours().toString().padStart(2,0)+":"+e.getMinutes().toString().padStart(2,0):t}}},o=s,i=a("2877"),l=Object(i["a"])(o,n,r,!1,null,null,null);e["a"]=l.exports},"8d68":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-px-md q-pt-lg"},[a("div",{staticClass:"page-heading text-white q-pa-md"},[a("div",{staticClass:"heading-caption"},[a("h6",[t._v("Orders")]),a("br"),a("p",[t._v("\n                The following is a list of orders for the selected month.\n            ")])]),a("div",{staticClass:"heading-stat-1 text-caption"},[t._v("\n            Today\n            "),a("br"),a("p",{staticClass:"text-subtitle2"},[t._v("\n                "+t._s(t.today.human)+"\n            ")])])]),a("div",{staticClass:"page-contents text-white q-pa-md"},[a("div",{staticClass:"content-1"},[a("div",{staticClass:"filter-orders"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"post_add",to:"/orders/add"}},[a("q-tooltip",{attrs:{anchor:"bottom right",self:"top middle",offset:[10,10]}},[t._v("Add Order")])],1),a("q-input",{attrs:{readonly:"",debounce:"500",dark:"",dense:"",outlined:""},on:{click:function(e){t.showSelect=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}]),model:{value:t.selectedMonth,callback:function(e){t.selectedMonth=e},expression:"selectedMonth"}})],1),a("div",{staticClass:"order-stats q-ml-sm"},[t.loadingStats?a("p",{staticClass:"text-subtitle2"},[a("q-spinner",{attrs:{color:"white",size:"2.45em"}})],1):a("q-breadcrumbs",{attrs:{separator:"|","active-color":"white"}},t._l(t.orderStats,(function(e){return a("q-breadcrumbs-el",{key:e.name,class:{"active-stat":e.count>0},attrs:{label:e.name+"("+e.count+")"},on:{click:function(a){return t.onSelectStatus(e)}}})})),1)],1)]),a("div",{staticClass:"content-2"},[a("q-table",{ref:"ordersTbl",staticClass:"orders-table",attrs:{square:"","row-key":"id",data:t.data,columns:t.columns,pagination:t.pagination,"rows-per-page-options":[0],loading:t.loading,"binary-state-sort":""},on:{"update:pagination":[function(e){t.pagination=e},t.onChgPage],request:t.onRequest},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"ordernum",attrs:{props:e}},[t._v("\n                            "+t._s(e.row.ordernum)+"\n                        ")]),a("q-td",{key:"status",attrs:{props:e}},[a("q-chip",{class:"chip-"+e.row.class,attrs:{square:""}},[t._v("\n                                "+t._s(e.row.status)+"\n                            ")])],1),a("q-td",{key:"target",attrs:{props:e}},[t._v("\n                            "+t._s(e.row.target)+"\n                        ")]),a("q-td",{key:"customer",staticClass:"capitalize",attrs:{props:e}},[t._v("\n                            "+t._s(e.row.customer)+" ("+t._s(e.row.type)+")\n                        ")]),a("q-td",{key:"total",attrs:{props:e}},[t._v("\n                            "+t._s(e.row.total)+"\n                        ")]),a("q-td",[a("q-btn",{staticClass:"q-mr-sm",attrs:{dense:"",flat:"",round:"",icon:"build",to:"/orders/process/"+e.row.id}},[a("q-tooltip",{attrs:{anchor:"center right",self:"center left",offset:[10,10]}},[t._v("Configure")])],1)],1)],1)]}}])})],1)]),a("q-dialog",{attrs:{seamless:"",persistent:""},model:{value:t.showSelect,callback:function(e){t.showSelect=e},expression:"showSelect"}},[a("q-card",{attrs:{dark:""}},[a("MonthPicker",{attrs:{color:"primary",locale:"en-US",min:t.minDate,max:t.maxDate},model:{value:t.selDate,callback:function(e){t.selDate=e},expression:"selDate"}}),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"},on:{click:t.onUpdateMonth}})],1)],1)],1)],1)},r=[],s=(a("fb6a"),a("4d90"),a("5319"),a("c973")),o=a.n(s),i=a("ded3"),l=a.n(i),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"monthpicker q-pa-md"},[a("div",{staticClass:"monthpicker-header"},[a("q-btn",{attrs:{dense:"",disable:t.minClean&&t.minClean.getFullYear()===t.selectedMonth.getFullYear(),flat:"",icon:"navigate_before",round:""},on:{click:function(e){return t.changeYear(!1)}}}),t._v("\n        "+t._s(t.selectedMonth.getFullYear())+"\n        "),a("q-btn",{attrs:{dense:"",disable:t.maxClean&&t.maxClean.getFullYear()===t.selectedMonth.getFullYear(),flat:"",icon:"navigate_next",round:""},on:{click:function(e){return t.changeYear(!0)}}})],1),a("div",{staticClass:"monthpicker-months"},t._l(t.displayedMonths,(function(e){return a("q-btn",{key:e.getTime(),class:{"monthpicker-current":t.isCurrentMonth(e)},attrs:{color:t.isSelectedMonth(e)?t.color:"",disable:t.isDisabled(e),flat:!t.isSelectedMonth(e),label:e.toLocaleDateString(t.localeArray,{month:"short"}),"no-caps":"","no-outline":"","no-ripple":"","text-color":t.isCurrentMonth(e)&&!t.isSelectedMonth(e)?t.color:""},on:{click:function(a){return t.selectMonth(e)}}})})),1)])},u=[],d={name:"MonthPicker",computed:{displayedMonths(){let t=[];for(let e=0;e<12;e++)t.push(new Date(this.selectedMonth.getFullYear(),e));return t},localeArray(){return this.locale?[this.locale]:[]},maxClean(){return this.max?this.cleanDate(this.max):null},minClean(){return this.min?this.cleanDate(this.min):null}},data(){return{interval:null,selectedMonth:null}},destroyed(){clearInterval(this.interval)},methods:{changeYear(t){if(t){let t=new Date(this.selectedMonth);t.setMonth(t.getMonth()+12),this.maxClean&&t>this.maxClean&&(t=this.maxClean),this.selectMonth(t)}else{let t=new Date(this.selectedMonth);t.setMonth(t.getMonth()-12),this.minClean&&t<this.minClean&&(t=this.minClean),this.selectMonth(t)}},cleanDate(t){let e=t?new Date(t):new Date;return e.setDate(1),e.setHours(0,0,0,0),e},currentMonth(){return this.cleanDate()},isCurrentMonth(t){return this.currentMonth().getTime()===t.getTime()},isDisabled(t){let e=!1;return(this.minClean&&t<this.minClean||this.maxClean&&t>this.maxClean)&&(e=!0),e},isSelectedMonth(t){return!!this.selectedMonth&&this.selectedMonth.getTime()===t.getTime()},selectMonth(t){this.$emit("input",t)}},props:["color","locale","max","min","value"],watch:{value:{handler(t){this.selectedMonth=t?this.cleanDate(t):this.currentMonth()},immediate:!0}}},h=d,p=(a("2a40"),a("2877")),g=a("9c40"),m=a("eebe"),f=a.n(m),b=Object(p["a"])(h,c,u,!1,null,"c84fab14",null),v=b.exports;f()(b,"components",{QBtn:g["a"]});var y=a("392b");let D=null;var M={name:"OrderIndex",components:{MonthPicker:v},mixins:[y["a"]],meta(){return{title:"Orders"}},beforeCreate(){D=this.$RepositoryFactory.get("orders")},created(){if(this.$route.query.m){let t=Date.parse(this.$route.query.m);0==isNaN(t)&&(this.selDate=new Date(t),this.selectedMonth=this.selDate.getFullYear()+"-"+(this.selDate.getMonth()+1).toString().padStart(2,0))}this.$route.query.s&&(this.search=this.$route.query.s),this.$route.query.p&&!isNaN(this.$route.query.p)&&(this.pagination.page=Number.parseInt(this.$route.query.p)),this.getOrderStats()},mounted(){this.onRequest({pagination:this.pagination,filter:void 0})},data(){const t=new Date;return{loading:!1,loadingStats:!0,showSelect:!1,minDate:new Date(2010,0),maxDate:new Date(t.getFullYear()+10,11),selDate:t,search:"",selectedMonth:t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0),orderStats:[],pagination:{sortBy:"target",descending:!0,page:1,rowsPerPage:9},columns:[{name:"ordernum",field:"ordernum",required:!0,label:"Order#",align:"left",sortable:!0},{name:"status",field:"status",align:"left",label:"Status",sortable:!0},{name:"target",field:"target",align:"left",label:"Target Date",sortable:!0},{name:"customer",field:"customer",align:"left",label:"Customer",sortable:!0},{name:"total",field:"total",align:"left",label:"Total",sortable:!0},{name:"action",align:"left",label:"Action"}],data:[],original:[]}},methods:{selOrders:function(t){},filterMonth(t){let e=Object.assign({},this.$route.query,{m:t});t||delete e.m,delete e.p,this.$router.replace({query:e}).catch((t=>{})),this.getOrderStats(),this.$refs["ordersTbl"].requestServerInteraction({pagination:l()(l()({},this.pagination),{},{page:1})})},onUpdateMonth:function(t){this.selDate&&(this.selectedMonth=this.selDate.getFullYear()+"-"+(this.selDate.getMonth()+1).toString().padStart(2,0),this.filterMonth(this.selectedMonth))},onSelectStatus(t){if(t&&t.count){this.search=t.name;let e=Object.assign({},this.$route.query,{s:t.name});t.name||delete e.s,delete e.p,this.$router.replace({query:e}).catch((t=>{})),this.$refs["ordersTbl"].requestServerInteraction({pagination:l()(l()({},this.pagination),{},{page:1})})}},onChgPage(t){let e=Object.assign({},this.$route.query,{p:t.page});t||delete e.p,this.$router.replace({query:e}).catch((t=>{}))},getOrderStats(){var t=this;return o()((function*(){t.loadingStats=!0;try{const e=yield D.getOrderStats(t.selDate);t.orderStats=e.slice()}catch(e){t.showNotif(!1,"Could not retrieve order statistics. ")}finally{t.loadingStats=!1}}))()},onRequest(t){var e=this;return o()((function*(){e.loading=!0;try{const a=yield D.getOrders(e.selDate,e.search);e.original=a,e.data=e.original.slice(),e.pagination.page=t.pagination.page}catch(a){e.showNotif(!1,"Could not retrieve list of orders. ")}finally{e.loading=!1}}))()}}},q=M,S=(a("1ff9"),a("b52d"),a("9989")),w=a("05c0"),C=a("27f9"),x=a("0016"),k=a("0d59"),_=a("ead5"),O=a("079eb"),$=a("eaac"),Y=a("bd08"),F=a("db86"),Q=a("b047"),T=a("24e8"),R=a("f09f"),N=a("4b7e"),P=a("7f67"),I=Object(p["a"])(q,n,r,!1,null,"7f733fd0",null);e["default"]=I.exports;f()(I,"components",{QPage:S["a"],QBtn:g["a"],QTooltip:w["a"],QInput:C["a"],QIcon:x["a"],QSpinner:k["a"],QBreadcrumbs:_["a"],QBreadcrumbsEl:O["a"],QTable:$["a"],QTr:Y["a"],QTd:F["a"],QChip:Q["a"],QDialog:T["a"],QCard:R["a"],QCardActions:N["a"]}),f()(I,"directives",{ClosePopup:P["a"]})},a812:function(t,e,a){},b52d:function(t,e,a){"use strict";var n=a("118a"),r=a.n(n);r.a}}]);