(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"392b":function(t,e,a){"use strict";a("4d90"),a("5319");var n,o,r={data(){return{prevRoute:null}},beforeRouteEnter(t,e,a){a((t=>{t.prevRoute=e}))},computed:{today(){const t=new Date,e={month:t.toLocaleDateString("en-US",{month:"long"}),year:t.getFullYear(),dayOfMonth:t.getDate(),dayOfWeek:t.getDay(),human:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),iso:t.toISOString(),yyyymmdd:t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,"0")};return e},startDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},lastDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth()+1,0)}},methods:{replaceAll:function(t,e,a){return t.replace(new RegExp(e,"g"),a)},resolveAssetsUrl:function(t){return"https://api.bake-free.co/"+t},showNotif:function(t,e){this.$q.notify({color:t?"green-4":"negative",textColor:"white",icon:t?"check_circle_outline":"error_outline",timeout:"2500",position:"top",message:e})},returnToPageIndex:function(t){this.prevRoute&&"/"!==this.prevRoute.path?this.$router.go(-1):this.$router.push(t).catch((t=>{}))},findMaxDt:function(t,e){return new Date(Math.max(new Date(t),new Date(e)))},findMinDt:function(t,e){return new Date(Math.min(new Date(t),new Date(e)))},toQDateFormat:function(t){return t?t.getFullYear()+"/"+(t.getMonth()+1).toString().padStart(2,0)+"/"+t.getDate().toString().padStart(2,0):t},toHumanReadableDt:function(t){const e=new Date(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})+" "+e.getHours().toString().padStart(2,0)+":"+e.getMinutes().toString().padStart(2,0):t}}},s=r,i=a("2877"),l=Object(i["a"])(s,n,o,!1,null,null,null);e["a"]=l.exports},5930:function(t,e,a){"use strict";var n=a("caf8"),o=a.n(n);o.a},7499:function(t,e,a){},"81a6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-px-md q-pt-lg"},[a("div",{staticClass:"page-heading text-white q-pa-md"},[a("div",{staticClass:"heading-caption"},[a("h6",[t._v("Comments")]),a("br"),a("p",[t._v("The following are product comments posted by customers.")])])]),a("div",{staticClass:"page-contents text-white q-pa-md"},[a("div",{staticClass:"content-1"},[a("q-input",{staticClass:"filter-search-box",attrs:{type:"search",placeholder:"Search product",debounce:"500",dark:"",dense:"",outlined:""},on:{input:t.searchInput},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0},{key:"append",fn:function(){return[a("transition",{attrs:{name:"fade"}},[a("q-icon",{directives:[{name:"show",rawName:"v-show",value:""!=t.search,expression:"search != ''"}],staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:t.searchClear}})],1)]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"content-2"},[a("q-table",{staticClass:"comments-table",attrs:{grid:"","row-key":"id",data:t.data,columns:t.columns,"rows-per-page-options":[0],pagination:t.pagination,filter:t.search,loading:t.loading},on:{"update:pagination":[function(e){t.pagination=e},t.onChgPage],request:t.onRequest},scopedSlots:t._u([{key:"item",fn:function(e){return[a("div",{staticClass:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-4"},[a("q-card",{staticClass:"bg-gray-alpha-2"},[a("q-card-section",{staticClass:"comment-text"},[t._v("\n                                "+t._s(e.row.text)+"\n                            ")]),a("q-separator"),a("q-list",{attrs:{dense:""}},t._l(e.cols.filter((function(t){return"text"!==t.name})),(function(e){return a("q-item",{key:e.name},[a("q-item-section",[a("q-item-label",[t._v(t._s(e.label))])],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",{staticClass:"text-primary"},[t._v(t._s(e.value))])],1)],1)})),1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"reply",to:"/comments/reply/"+e.row.id}},[a("q-tooltip",{attrs:{anchor:"bottom right",self:"top middle",offset:[10,10]}},[t._v("Reply to comment\n                                    ")])],1),a("q-btn",{attrs:{dense:"",flat:"",round:"",icon:e.row.flagged?"flag":"outlined_flag"},on:{click:function(a){return t.confirmAction(e.row.id,!e.row.flagged)}}},[a("q-tooltip",{attrs:{anchor:"bottom right",self:"top middle",offset:[10,10]}},[t._v("\n                                        "+t._s(e.row.flagged?"Unflag":"Flag")+"\n                                        comment\n                                    ")])],1)],1)],1)],1)]}}])}),a("ConfirmDialog",{attrs:{showDlg:t.showDlg},on:{"update:showDlg":function(e){t.showDlg=e},"update:show-dlg":function(e){t.showDlg=e}},scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-avatar",{attrs:{icon:"report_problem",color:"red-5","text-color":"white"}})]},proxy:!0},t.targetFlagVal?{key:"message",fn:function(){return[t._v("\n                    This action will mark this comment as "),a("u",[t._v("FLAGGED")]),t._v(".\n                    "),a("br"),t._v("\n                    Comment will no longer be visible in the product page.\n                ")]},proxy:!0}:{key:"message",fn:function(){return[t._v("\n                    This action will "),a("u",[t._v("UNFLAG")]),t._v(" this comment. "),a("br"),t._v("\n                    Comment will be visible again in the product page.\n                ")]},proxy:!0},{key:"actions",fn:function(){return[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Proceed",color:"red-5"},on:{click:t.onProceed}})]},proxy:!0}],null,!0)})],1)])])},o=[],r=(a("fb6a"),a("5319"),a("c973")),s=a.n(r),i=a("96ec"),l=a("392b");let c=null;var u={name:"CommentIndex",components:{ConfirmDialog:i["a"]},mixins:[l["a"]],meta(){return{title:"Product Comments"}},beforeCreate(){c=this.$RepositoryFactory.get("comments")},created(){this.$route.query.s&&(this.search=this.$route.query.s),this.$route.query.p&&!isNaN(this.$route.query.p)&&(this.pagination.page=Number.parseInt(this.$route.query.p))},mounted(){this.onRequest({pagination:this.pagination,filter:void 0})},data(){return{announcementList:[],search:"",searchReq:null,loading:!1,showDlg:!1,toFlagID:-1,targetFlagVal:!1,pagination:{sortBy:"posted",descending:!0,page:1,rowsPerPage:9},columns:[{name:"text",field:"text",label:"Text",align:"left",required:!0,sortable:!0},{name:"posted",field:"posted",align:"left",label:"Posted",sortable:!0},{name:"product",field:"product",align:"left",label:"Product",sortable:!0},{name:"author",field:"author",align:"left",label:"Author",sortable:!0}],data:[],original:[]}},methods:{searchClear(t){let e=Object.assign({},this.$route.query);delete e.s,this.$router.replace({query:e}).catch((t=>{})),this.search=""},searchInput(t){let e=Object.assign({},this.$route.query,{s:t});t||delete e.s,this.$router.replace({query:e}).catch((t=>{}))},onChgPage(t){let e=Object.assign({},this.$route.query,{p:t.page});t||delete e.p,this.$router.replace({query:e}).catch((t=>{}))},onRequest(t){var e=this;return s()((function*(){e.loading=!0;try{const t=yield c.getComments();e.original=t,e.data=e.original.slice()}catch(t){e.showNotif(!1,"Could not retrieve comments. ")}finally{e.loading=!1}}))()},confirmAction(t,e){this.targetFlagVal=e,this.showDlg=!0,this.toFlagID=t},onProceed(){var t=this;return s()((function*(){if(-1!==t.toFlagID)try{yield c.flagComment(t.toFlagID,t.targetFlagVal);t.showNotif(!0,t.targetFlagVal?"Comment has been FLAGGED.":"Comment has been UNFLAGGED."),t.data.forEach((e=>{e.id===t.toFlagID&&(e.flagged=t.targetFlagVal)})),t.toFlagID=-1,t.targetFlagVal=!1}catch(e){t.showNotif(!1,"Could not update item. ")}}))()}}},d=u,g=(a("fe3d"),a("5930"),a("2877")),p=a("9989"),m=a("27f9"),h=a("0016"),f=a("eaac"),b=a("f09f"),w=a("a370"),y=a("eb85"),v=a("1c1c"),q=a("66e5"),D=a("4074"),C=a("0170"),_=a("4b7e"),x=a("9c40"),S=a("05c0"),F=a("cb32"),k=a("7f67"),Q=a("eebe"),$=a.n(Q),I=Object(g["a"])(d,n,o,!1,null,"77f3fc66",null);e["default"]=I.exports;$()(I,"components",{QPage:p["a"],QInput:m["a"],QIcon:h["a"],QTable:f["a"],QCard:b["a"],QCardSection:w["a"],QSeparator:y["a"],QList:v["a"],QItem:q["a"],QItemSection:D["a"],QItemLabel:C["a"],QCardActions:_["a"],QBtn:x["a"],QTooltip:S["a"],QAvatar:F["a"]}),$()(I,"directives",{ClosePopup:k["a"]})},"96ec":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{value:t.showDlg,square:""},on:{hide:t.emitClose}},[a("q-card",{attrs:{dark:""}},[a("q-card-section",{staticClass:"row items-center"},[t._t("avatar"),a("span",{staticClass:"q-ml-sm"},[t._t("message")],2)],2),a("q-card-actions",{attrs:{align:"right"}},[t._t("actions")],2)],1)],1)},o=[],r={name:"ConfirmDialog",props:{showDlg:{type:Boolean,required:!0,default:!1}},methods:{emitClose(){this.$emit("update:showDlg",!1)}}},s=r,i=a("2877"),l=a("24e8"),c=a("f09f"),u=a("a370"),d=a("4b7e"),g=a("eebe"),p=a.n(g),m=Object(i["a"])(s,n,o,!1,null,null,null);e["a"]=m.exports;p()(m,"components",{QDialog:l["a"],QCard:c["a"],QCardSection:u["a"],QCardActions:d["a"]})},caf8:function(t,e,a){},fe3d:function(t,e,a){"use strict";var n=a("7499"),o=a.n(n);o.a}}]);