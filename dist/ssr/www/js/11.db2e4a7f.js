(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"00f0":function(t,e,a){},"136a":function(t,e,a){},"392b":function(t,e,a){"use strict";a("4d90"),a("5319");var n,o,s={data(){return{prevRoute:null}},beforeRouteEnter(t,e,a){a((t=>{t.prevRoute=e}))},computed:{today(){const t=new Date,e={month:t.toLocaleDateString("en-US",{month:"long"}),year:t.getFullYear(),dayOfMonth:t.getDate(),dayOfWeek:t.getDay(),human:t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),iso:t.toISOString(),yyyymmdd:t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,"0")};return e},startDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1)},lastDayOfMonth(){const t=new Date;return new Date(t.getFullYear(),t.getMonth()+1,0)}},methods:{replaceAll:function(t,e,a){return t.replace(new RegExp(e,"g"),a)},resolveAssetsUrl:function(t){return"https://localhost:3000/"+t},showNotif:function(t,e){this.$q.notify({color:t?"green-4":"negative",textColor:"white",icon:t?"check_circle_outline":"error_outline",timeout:"2500",position:"top",message:e})},returnToPageIndex:function(t){this.prevRoute&&"/"!==this.prevRoute.path?this.$router.go(-1):this.$router.push(t).catch((t=>{}))},findMaxDt:function(t,e){return new Date(Math.max(new Date(t),new Date(e)))},findMinDt:function(t,e){return new Date(Math.min(new Date(t),new Date(e)))},toQDateFormat:function(t){return t?t.getFullYear()+"/"+(t.getMonth()+1).toString().padStart(2,0)+"/"+t.getDate().toString().padStart(2,0):t},toHumanReadableDt:function(t){const e=new Date(t);return e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})+" "+e.getHours().toString().padStart(2,0)+":"+e.getMinutes().toString().padStart(2,0):t}}},i=s,r=a("2877"),l=Object(r["a"])(i,n,o,!1,null,null,null);e["a"]=l.exports},"4c51":function(t,e,a){"use strict";var n=a("136a"),o=a.n(n);o.a},9013:function(t,e,a){"use strict";var n=a("00f0"),o=a.n(n);o.a},"96ec":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{value:t.showDlg,square:""},on:{hide:t.emitClose}},[a("q-card",{attrs:{dark:""}},[a("q-card-section",{staticClass:"row items-center"},[t._t("avatar"),a("span",{staticClass:"q-ml-sm"},[t._t("message")],2)],2),a("q-card-actions",{attrs:{align:"right"}},[t._t("actions")],2)],1)],1)},o=[],s={name:"ConfirmDialog",props:{showDlg:{type:Boolean,required:!0,default:!1}},methods:{emitClose(){this.$emit("update:showDlg",!1)}}},i=s,r=a("2877"),l=a("24e8"),d=a("f09f"),c=a("a370"),u=a("4b7e"),h=a("eebe"),m=a.n(h),f=Object(r["a"])(i,n,o,!1,null,null,null);e["a"]=f.exports;m()(f,"components",{QDialog:l["a"],QCard:d["a"],QCardSection:c["a"],QCardActions:u["a"]})},ad07:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-px-md q-pt-lg"},[a("div",{staticClass:"page-heading text-white q-pa-md"},[a("div",{staticClass:"heading-caption"},[a("h6",[t._v("Business Holidays")]),a("br"),a("p",[t._v("\n                The following business holidays are unselectable delivery or\n                pickup dates when ordering.\n            ")])]),a("div",{staticClass:"heading-stat-1 text-caption"},[t._v("\n            Today\n            "),a("br"),a("p",{staticClass:"text-subtitle2"},[t._v("\n                "+t._s(t.today.human)+"\n            ")])])]),a("div",{staticClass:"page-contents text-white q-pa-md"},[a("div",{staticClass:"content-1"},[a("div",{staticClass:"text-subtitle2 flex flex-center"},[a("q-icon",{staticClass:"caption-icon q-mx-md",attrs:{name:"calendar_today"}}),t._v("Business Holidays\n                "),a("q-btn",{staticClass:"ml-auto q-mx-md",attrs:{flat:"",dense:"",rounded:"",icon:"add",to:"/holidays/add"}},[a("q-tooltip",{attrs:{anchor:"bottom right",self:"top middle",offset:[10,10]}},[t._v("Add new\n                    ")])],1)],1),a("div",{staticClass:"bg-gray-alpha relative-position"},[a("q-date",{staticClass:"date",attrs:{"no-unset":"",mask:"YYYY-MM-DD",events:t.holidayList,options:t.holidayList,"event-color":"orange","emit-immediately":"",flat:"",minimal:""},on:{input:t.getHolidaysList},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("q-inner-loading",{attrs:{showing:t.loading}},[a("q-spinner",{attrs:{color:"white",size:"2em"}})],1)],1)]),a("div",{staticClass:"content-2"},[a("Holidays",t._b({scopedSlots:t._u([{key:"actions",fn:function(e){var n=e.item;return[a("q-btn",{attrs:{dense:"",flat:"",rounded:"",icon:"edit",to:"/holidays/edit/"+n.id}},[a("q-tooltip",{attrs:{anchor:"bottom right",self:"top middle",offset:[10,10]}},[t._v("Edit\n                        ")])],1),a("q-btn",{attrs:{dense:"",flat:"",rounded:"",icon:"delete"},on:{click:function(e){return t.confirmDel(n.id)}}},[a("q-tooltip",{attrs:{anchor:"bottom right",self:"top middle",offset:[10,10]}},[t._v("Delete\n                        ")])],1)]}}])},"Holidays",{date:t.date,data:t.data},!1)),a("ConfirmDialog",{attrs:{showDlg:t.showDlg},on:{"update:showDlg":function(e){t.showDlg=e},"update:show-dlg":function(e){t.showDlg=e}},scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-avatar",{attrs:{icon:"delete_forever",color:"red-5","text-color":"white"}})]},proxy:!0},{key:"message",fn:function(){return[t._v("\n                    Continue on removing this holiday entry?"),a("br"),t._v("\n                    Warning: This action is permanent.\n                ")]},proxy:!0},{key:"actions",fn:function(){return[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Remove",color:"red-5"},on:{click:t.onRemove}})]},proxy:!0}])})],1)])])},o=[],s=(a("fb6a"),a("a434"),a("ddb0"),a("c973")),i=a.n(s),r=a("96ec"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-list",{staticClass:"bg-none relative-position"},[a("transition-group",{attrs:{name:"slide",tag:"div"}},t._l(t.data,(function(e){return a("div",{key:e.id,staticClass:"holiday-item-container bg-gray-alpha-2 no-scroll q-pa-md q-mb-xs"},[a("div",{staticClass:"text-subtitle2 q-mb-md holiday-item"},[a("div",{staticClass:"reason"},[t._v("\n                    "+t._s(e.reason)+"\n                ")]),a("div",[t._t("actions",null,{item:e})],2)]),a("q-item",{staticClass:"detail-field",attrs:{dense:""}},[a("span",{staticClass:"field-label"},[t._v(" Start")]),a("span",{staticClass:"text-primary field-value"},[t._v("\n                    "+t._s(t.humanReadableDt(e.start))+"\n                ")])]),a("q-item",{staticClass:"detail-field",attrs:{dense:""}},[a("span",{staticClass:"field-label"},[t._v(" End")]),a("span",{staticClass:"text-primary field-value"},[t._v("\n                    "+t._s(t.humanReadableDt(e.end))+"\n                ")])])],1)})),0)],1)},d=[],c=a("392b"),u={name:"Holidays",mixins:[c["a"]],props:{date:{type:String,required:!0},data:{type:Array,required:!0,default(){}}},methods:{humanReadableDt(t){return this.toHumanReadableDt(t)}}},h=u,m=(a("9013"),a("2877")),f=a("1c1c"),p=a("66e5"),g=a("eebe"),y=a.n(g),v=Object(m["a"])(h,l,d,!1,null,"6ea5a111",null),D=v.exports;y()(v,"components",{QList:f["a"],QItem:p["a"]});let w=null;var b={name:"HolidayIndex",components:{ConfirmDialog:r["a"],Holidays:D},mixins:[c["a"]],meta(){return{title:"Business Holidays"}},beforeCreate(){w=this.$RepositoryFactory.get("holidays")},created(){var t=this;return i()((function*(){t.date=t.today.yyyymmdd,t.startOfMonth=t.startDayOfMonth,t.endOfMonth=t.lastDayOfMonth,yield t.getHolidays(),t.data.splice(0,t.data.length,...t.selectInclusive(t.date))}))()},computed:{holidayList(){const t=new Set;return this.holidayItems.map((e=>{const a=this.findMaxDt(e.start,this.startOfMonth),n=this.findMinDt(e.end,this.endOfMonth);for(let o=a;o.getTime()<=n.getTime();o.setDate(o.getDate()+1))t.add(this.toQDateFormat(o))})),[...t]}},data(){return{date:"",startOfMonth:"",endOfMonth:"",data:[],holidayItems:[],loading:!0,showDlg:!1,toDelID:-1}},methods:{selectInclusive(t){const e=new Date(t).setHours(0,0,0,0);return this.holidayItems.filter((function(t){const a=new Date(t.start).setHours(0,0,0,0),n=new Date(t.end).setHours(0,0,0,0);return!(e<a||e>n)}))},getHolidaysList(t,e,a){var n=this;return i()((function*(){if("month"==e||"year"==e){const e=new Date(t);n.startOfMonth=new Date(e.getFullYear(),e.getMonth(),1),n.endOfMonth=new Date(e.getFullYear(),e.getMonth()+1,0),yield n.getHolidays(a)}n.data.splice(0,n.data.length,...n.selectInclusive(t))}))()},getHolidays(t){var e=this;return i()((function*(){e.loading=!0;try{const a=yield w.getBusinessHolidays(t);e.holidayItems=a.slice()}catch(a){e.showNotif(!1,"Could not retrieve holiday entries for selected month. ")}finally{e.loading=!1}}))()},onRemove(){var t=this;return i()((function*(){if(-1!==t.toDelID)try{yield w.deleteHoliday(t.toDelID);t.showNotif(!0,"Successfully removed holiday entry."),t.$delete(t.data,t.data.findIndex((e=>e.id==t.toDelID))),t.$delete(t.holidayItems,t.holidayItems.findIndex((e=>e.id==t.toDelID))),t.toDelID=-1}catch(e){t.showNotif(!1,"Could not delete item. ")}}))()},confirmDel(t){this.toDelID=t,this.showDlg=!0}}},C=b,_=(a("4c51"),a("9989")),q=a("0016"),x=a("9c40"),M=a("05c0"),S=a("52ee"),I=a("74f7"),H=a("0d59"),O=a("cb32"),k=a("7f67"),Q=Object(m["a"])(C,n,o,!1,null,"c548244e",null);e["default"]=Q.exports;y()(Q,"components",{QPage:_["a"],QIcon:q["a"],QBtn:x["a"],QTooltip:M["a"],QDate:S["a"],QInnerLoading:I["a"],QSpinner:H["a"],QAvatar:O["a"]}),y()(Q,"directives",{ClosePopup:k["a"]})}}]);